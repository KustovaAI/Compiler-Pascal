## Compiler-Pascal
#Техническое задание

Необходимо разработать интегрированную среду разработки для программ на языке Pascal.

Текст программы вводится либо через консоль, либо читается из файла. Текст программы хранится в виде иерархического списка, а переменные и константы хранятся в хэш-таблице. Текст программы проверяется на корректность. Среда поддерживает объявления констант и переменных, команды Write, Read, условные операторы if, else, в том числе и вложенные, так же может выполняться вычисление арифметических операций над переменными. Оно выполняется с использованием постфиксной формы.

Над переменными могут производиться следующие операции: +, -, *, / (только для double), div (только для целых), mod (только для целых), sin, cos, tg, ctg, ln.

В иерархическом списке хранятся строки текста программы. В списке содержится указатели на следующей элемент этого же уровня, указатель на подуровень и указатель на родителя текущего элемента.

#Список объектов:

· иерархический список

· постфикс

· класс для обработки текста

· таблица

#Список алгоритмов:

· перевод в постфиксную форму

· подсчёт выражения

#Описание моделей объектов:

· Иерархический список (THierarchy_List) является шаблонным классом и состоит из звеньев (link - непосредственно данные, указатель на следующее звено на том же уровне, указатель на следующий подуровень и указатель на родителя); при этом имеется указатель на первое и текущее звенья. Доступны операции добавления элемента на тот же уровень и на подуровень, проверки на пустоту, получения текущего элемента, сброса текущего элемента на первый, переход на родительский уровень, переход к следующему элементу, переход через подуровень.

· (TPostfix) – класс для расчёта арифметических выражений с использованием обратной польской записи. Состоит из infix – изначальной записи выражения и postfix – записи выражения в обратной польской форме. Доступны операции получения инфикса и постфикса, перевод в польскую форму, удаление пробелов между символами, проверка расстановки скобок, проверка правильности введённой строки, получение приоритета операций, само вычисление выражения.

· Класс для обработки текста (TText) включает себя иерархический список строк, хэш-таблицу с переменными и с ключевыми словами, число строк и число begin. Этот класс считывает текст из файла и выводит на экран, обрабатывает консольный ввод текста программы, добавляет строки в иерархический список. Так же

доступны операции: проверка конца строки на «;», удаление пробелов до и после ключевых слов, вычисление результата работы программы.

· Таблица (THash1Table) состоит из записей (TNote – ключ, переменная и тип переменной); в классе также описывается размер буфера, размер шага, количество элементов в таблице. В таблице есть хэш-функция, доступны следующие операции над записями: поиск, вставка, чтение из файла, удаление, установка значений, а также вывод на консоль содержимого таблицы.

#Описание основных алгоритмов

#Перевод в постфиксную форму

1) Создаем два стека: stack1 и stack2.

2) Просматриваем поступающую строку

2.1. Если увидели операнд, то перемещаем его в stack1. Если “(”, то в stack2.

2.2. Если “)” - перекладываем символы из stack2 в stack1, пока не встретим “(”.

2.3. Если встретили операцию и ее приоритет не ниже, чем у операции на вершине stack2, то кладем в stack2.

2.4. Если приоритет операции ниже, то перекладываем из stack2 в stack1 все операции с более высоким или равным приоритетом.

3) Когда закончим, переложить из stack2 в stack1.

4) Из stack1 вынимаем все символы и перекладываем в строку.

#Подсчет

1) Объявляем новый стек stack.

2) Если в строке лежит операнд, то кладем его в stack и заменяем его численным значением.

3) Если операция - достаем из stack два операнда, лежащих сверху (или один при унарной операции) и выполняем эту операцию. Результат кладем обратно в stack.